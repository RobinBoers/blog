<!doctype html><html lang=en-us><head>
<meta charset=utf-8>
<meta charset=utf-8>
<meta name=mobile-web-app-capable content="yes">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=follow.it-verification-code content="1wpQWJc4NzH5B8kuayYz">
<title>Publish posts using Blogger API in PHP — Notes | Robin Boers</title><link rel=stylesheet type=text/css href=/notes/css/main.css>
<link rel=stylesheet type=text/css href=/notes/css/feed.css>
<link rel=icon href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 110 110%22><text y=%22.9em%22 font-size=%2290%22>⭐</text></svg>">
<link rel=authorization_endpoint href=https://indieauth.com/auth>
<link rel=token_endpoint href=https://tokens.indieauth.com/token>
<link rel=me href=https://github.com/Robin%20Boers>
<link rel=webmention href=https://webmention.io/geheimesite.nl/webmention>
<link rel=pingback href=https://webmention.io/geheimesite.nl/xmlrpc>
<meta property="og:url" content="https://blog.geheimesite.nl/notes">
<meta property="og:title" content="Notes">
<meta property="og:site_name" content="Notes">
<meta property="og:type" content="website">
<meta name=twitter:title content="Notes">
</head><body>
<header>
<div>
<div class="flex flex-row justify-between items-center">
<div class="header__item flex flex-row flex-grow">
<div id=logo>
</div><h1 class=title>
<a id=site__name href=https://blog.geheimesite.nl/notes>
Notes
</a>
</h1></div><nav aria-label="page menu">
<ul role=menubar class="flex flex-row gap-10 m-0 p-0">
<li role=none>
<a class=menu__item href=https://blog.geheimesite.nl/notes><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38.0 01-.9 3.8A8.5 8.5.0 0112.5 20a8.38 8.38.0 01-3.8-.9L3 21l1.9-5.7A8.38 8.38.0 014 11.5a8.5 8.5.0 014.7-7.6 8.38 8.38.0 013.8-.9h.5a8.48 8.48.0 018 8v.5z"/></svg>
</a>
</li></ul></nav></div></div></header><article class="feed__li feed__content post mt-10">
<div class="text-center my-7 max-w-xl mx-auto">
<time class="hidden dt-published">2021-08-09 10:41:00.034 -0700 -0700</time>
<h1 class="p-name mb-0 text-4xl">Publish posts using Blogger API in PHP</h1><p class="my-5 bold">
09 August 2021
</p></div><section class="p-summary e-content">
<p>This is how to create a blogpost using the <a href=https://github.com/googleapis/google-api-php-client>Google Client Library for PHP</a>.</p><p>To setup:</p><ol>
<li>Go to <a href=https://console.developers.google.com/>https://console.developers.google.com</a></li><li>Add an project, and tap &ldquo;Credentials&rdquo;</li><li>Tap &ldquo;Create data&rdquo; and create an Client-ID OAuth</li><li>Choose the &ldquo;Webapp&rdquo; and enter the path to your server in the &ldquo;Authorized diversion URIs&rdquo; textbox</li><li>Hit &ldquo;Create&rdquo;, and hit OK</li><li>Click on the Client-ID you just generated</li><li>Click &ldquo;Download JSON&rdquo;</li><li>Download the file, and rename it to <code>client_secret.json</code></li></ol><p>Use this script to create and publish posts. Make sure to first enter the path to your <code>client_secret.json</code>.</p><pre tabindex=0><code>&lt;?php  
// This script creates a post  
// Made by Robin Boers  
  
// load Google Api  
require_once &#39;../api/vendor/autoload.php&#39;;  
  
session_start();  
  
$redirect_uri = &#39;http://&#39; . $_SERVER[&#39;HTTP_HOST&#39;] . $_SERVER[&#39;PHP_SELF&#39;];  
  
// Authenticate user with OAuth   
$client = new Google_Client();  
$client-&gt;setAuthConfig(&#39;/path/to/client_secret.json&#39;);  
$client-&gt;setApplicationName(&#39;Example App&#39;);  
$client-&gt;setRedirectUri($redirect_uri);  
$client-&gt;setScopes(array(&#39;https://www.googleapis.com/auth/blogger&#39;));   
  
if (!isset($_SESSION[&#39;access_token&#39;]) &amp;&amp; isset($_GET[&#39;code&#39;])) {  
    $client-&gt;authenticate($_GET[&#39;code&#39;]);  
    $access_token = $client-&gt;getAccessToken();  
    $_SESSION[&#39;access_token&#39;] = $access_token;  
}  
  
if (isset($_SESSION[&#39;access_token&#39;]) &amp;&amp; $_SESSION[&#39;access_token&#39;]) {  
      
    // First set the accesstoken  
    $client-&gt;setAccessToken($_SESSION[&#39;access_token&#39;]);  
  
    $blogger = new Google_Service_Blogger($client);  
  
    // Get blog information  
    $blog = $blogger-&gt;blogs-&gt;getByUrl(&#39;http://stupidstuffwastaken.blogspot.com&#39;); // Replace this URI with your blog&#39;s URI  
    $blogId = $blog-&gt;getId();  
    $blogName  = $blog-&gt;getName();  
  
    $postId = &#34;651261343944639929&#34;; // If you want to update a post  
  
     // Creating post  
     $mypost = new Google_Service_Blogger_Post();  
     $mypost-&gt;setTitle(&#34;Example heading&#34;);  
     $mypost-&gt;setContent(&#34;Lorem ipsum dolor sit amet, consectetur adipiscing elit.&#34;);  
  
     $data = $blogger-&gt;posts-&gt;insert($blogId, $mypost); // or update post like this: $data = $blogger-&gt;posts-&gt;update($blogId, $postId, $mypost);  
     var_dump($data);  
}  
?&gt;
</code></pre></section><a class=hidden href=https://brid.gy/publish/mastodon></a>
<a class=hidden href=https://brid.gy/publish/twitter></a>
<a class=hidden href=https://fed.brid.gy/></a>
<data class=p-bridgy-omit-link value=false></data>
<section>
<p>
<a class="button btn" id=wm-link href=https://webmention.io/geheimesite.nl/webmention target=_blank>webmention this&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-external-link"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
</a>
<script src=/js/webmention.min.js data-wordcount=100 async></script>
</p><div id=webmentions></div></section></article></div><hr class="my-7 border-none">
<footer class=page-footer>
<p>
&copy; 2022 Robin Boers. Webdesigner and PHP-programmer since 2017.
</p></footer></body></html>