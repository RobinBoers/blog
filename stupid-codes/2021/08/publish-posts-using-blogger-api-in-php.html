<!doctype html><html lang=en-us><head><meta charset=utf-8><meta charset=utf-8><meta name=mobile-web-app-capable content="yes"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=follow.it-verification-code content="gMl06yz3830xNk7Qeh4M"><title>Publish posts using Blogger API in PHP — Stupid Codes | Robin Boers</title><link rel=stylesheet type=text/css href=https://geheimesite.nl/assets/css/main.css><link rel=stylesheet type=text/css href=https://blog.geheimesite.nl/stupid-codes/css/feed.css><link rel=icon href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 110 110%22><text y=%22.9em%22 font-size=%2290%22>⭐</text></svg>"><link rel=authorization_endpoint href=https://indieauth.com/auth><link rel=token_endpoint href=https://tokens.indieauth.com/token><link rel=webmention href=https://webmention.io/geheimesite.nl/webmention><link rel=pingback href=https://webmention.io/geheimesite.nl/xmlrpc><link rel=micropub href=https://micro.geheimesite.nl/endpoint><link rel=microsub href=https://aperture.p3k.io/microsub/733><meta property="og:url" content="https://blog.geheimesite.nl/stupid-codes"><meta property="og:title" content="Stupid Codes"><meta property="og:site_name" content="Stupid Codes"><meta property="og:type" content="website"><meta name=twitter:title content="Stupid Codes"></head><body><header><div><div class="flex flex-row justify-between items-center"><div class="header__item flex flex-row flex-grow"><div id=logo></div><h1 class=title><a id=site__name href=https://blog.geheimesite.nl/stupid-codes>Stupid Codes</a></h1></div><nav aria-label="page menu"><ul role=menubar class="flex flex-row gap-10 m-0 p-0"><li role=none><a class=menu__item href=https://blog.geheimesite.nl/stupid-codes><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38.0 01-.9 3.8A8.5 8.5.0 0112.5 20a8.38 8.38.0 01-3.8-.9L3 21l1.9-5.7A8.38 8.38.0 014 11.5a8.5 8.5.0 014.7-7.6 8.38 8.38.0 013.8-.9h.5a8.48 8.48.0 018 8v.5z"/></svg></a></li></ul></nav></div></div></header><article class="feed__li feed__content h-entry post mt-10"><div class="text-center my-7 max-w-xl mx-auto"><time class="hidden dt-published">2021-08-09 10:41:00.034 -0700 -0700</time><h1 class="p-name mb-0 text-4xl">Publish posts using Blogger API in PHP</h1><p class="my-5 bold text-black dark:text-white">09 August 2021</p><div class=hidden><div class="flex flex-row justify-between items-center"><div rel=author class="flex items-center gap-5 p-author h-card"><img class=u-photo src=https://geheimesite.nl/images/me.jpeg alt="Robin Boers" id=author-img><div><p rel=me class="p-name font-bold m-0" id=author-name>Robin Boers</p><p class=m-0>09 August 2021</p></div></div><div class=flex><a class="icon u-url" href=https://blog.geheimesite.nl/stupid-codes/2021/08/publish-posts-using-blogger-api-in-php.html><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bookmark"><path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"/></svg></a></div></div></div></div><section class="p-summary e-content"><p>This is how to create a blogpost using the <a href=https://github.com/googleapis/google-api-php-client>Google Client Library for PHP</a>.</p><p>To setup:</p><ol><li>Go to <a href=https://console.developers.google.com/>https://console.developers.google.com</a></li><li>Add an project, and tap &ldquo;Credentials&rdquo;</li><li>Tap &ldquo;Create data&rdquo; and create an Client-ID OAuth</li><li>Choose the &ldquo;Webapp&rdquo; and enter the path to your server in the &ldquo;Authorized diversion URIs&rdquo; textbox</li><li>Hit &ldquo;Create&rdquo;, and hit OK</li><li>Click on the Client-ID you just generated</li><li>Click &ldquo;Download JSON&rdquo;</li><li>Download the file, and rename it to <code>client_secret.json</code></li></ol><p>Use this script to create and publish posts. Make sure to first enter the path to your <code>client_secret.json</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// This script creates a post  
</span></span></span><span style=display:flex><span><span style=color:#75715e>// Made by Robin Boers  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// load Google Api  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>require_once</span> <span style=color:#e6db74>&#39;../api/vendor/autoload.php&#39;</span>;  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#a6e22e>session_start</span>();  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>$redirect_uri <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;http://&#39;</span> <span style=color:#f92672>.</span> $_SERVER[<span style=color:#e6db74>&#39;HTTP_HOST&#39;</span>] <span style=color:#f92672>.</span> $_SERVER[<span style=color:#e6db74>&#39;PHP_SELF&#39;</span>];  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// Authenticate user with OAuth   
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$client <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Google_Client</span>();  
</span></span><span style=display:flex><span>$client<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>setAuthConfig</span>(<span style=color:#e6db74>&#39;/path/to/client_secret.json&#39;</span>);  
</span></span><span style=display:flex><span>$client<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>setApplicationName</span>(<span style=color:#e6db74>&#39;Example App&#39;</span>);  
</span></span><span style=display:flex><span>$client<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>setRedirectUri</span>($redirect_uri);  
</span></span><span style=display:flex><span>$client<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>setScopes</span>(<span style=color:#66d9ef>array</span>(<span style=color:#e6db74>&#39;https://www.googleapis.com/auth/blogger&#39;</span>));   
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>isset</span>($_SESSION[<span style=color:#e6db74>&#39;access_token&#39;</span>]) <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>isset</span>($_GET[<span style=color:#e6db74>&#39;code&#39;</span>])) {  
</span></span><span style=display:flex><span>    $client<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>authenticate</span>($_GET[<span style=color:#e6db74>&#39;code&#39;</span>]);  
</span></span><span style=display:flex><span>    $access_token <span style=color:#f92672>=</span> $client<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getAccessToken</span>();  
</span></span><span style=display:flex><span>    $_SESSION[<span style=color:#e6db74>&#39;access_token&#39;</span>] <span style=color:#f92672>=</span> $access_token;  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isset</span>($_SESSION[<span style=color:#e6db74>&#39;access_token&#39;</span>]) <span style=color:#f92672>&amp;&amp;</span> $_SESSION[<span style=color:#e6db74>&#39;access_token&#39;</span>]) {  
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>    <span style=color:#75715e>// First set the accesstoken  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    $client<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>setAccessToken</span>($_SESSION[<span style=color:#e6db74>&#39;access_token&#39;</span>]);  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    $blogger <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Google_Service_Blogger</span>($client);  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Get blog information  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    $blog <span style=color:#f92672>=</span> $blogger<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>blogs</span><span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getByUrl</span>(<span style=color:#e6db74>&#39;http://stupidstuffwastaken.blogspot.com&#39;</span>); <span style=color:#75715e>// Replace this URI with your blog&#39;s URI  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    $blogId <span style=color:#f92672>=</span> $blog<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getId</span>();  
</span></span><span style=display:flex><span>    $blogName  <span style=color:#f92672>=</span> $blog<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getName</span>();  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    $postId <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;651261343944639929&#34;</span>; <span style=color:#75715e>// If you want to update a post  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  
</span></span><span style=display:flex><span>     <span style=color:#75715e>// Creating post  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>     $mypost <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Google_Service_Blogger_Post</span>();  
</span></span><span style=display:flex><span>     $mypost<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>setTitle</span>(<span style=color:#e6db74>&#34;Example heading&#34;</span>);  
</span></span><span style=display:flex><span>     $mypost<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>setContent</span>(<span style=color:#e6db74>&#34;Lorem ipsum dolor sit amet, consectetur adipiscing elit.&#34;</span>);  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>     $data <span style=color:#f92672>=</span> $blogger<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>posts</span><span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>insert</span>($blogId, $mypost); <span style=color:#75715e>// or update post like this: $data = $blogger-&gt;posts-&gt;update($blogId, $postId, $mypost);  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>     <span style=color:#a6e22e>var_dump</span>($data);  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span><span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div></section><a class=hidden href=https://brid.gy/publish/mastodon></a>
<a class=hidden href=https://brid.gy/publish/twitter></a>
<data class=p-bridgy-omit-link value=false></data><section class=print:hidden><div id=webmentions></div><p><a class="button btn" id=wm-link href=https://webmention.io/geheimesite.nl/webmention target=_blank>webmention this&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-external-link"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg></a>
<a class="button btn ml-2" id=wm-link href="https://quill.p3k.io?dontask=1&name=dontask&me=https%3A%2F%2Fcommentpara.de%2F&reply=https%3A%2F%2Fblog.geheimesite.nl%2Fstupid-codes%2F2021%2F08%2Fpublish-posts-using-blogger-api-in-php.html" target=_blank>leave a comment&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-external-link"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg></a>
<script src=/js/webmention.min.js data-wordcount=100 async></script></p></section></article><div class=print:hidden id=webmentions></div><hr class="my-7 border-none"><footer class=page-footer><p class="m-0 mb-2"><a href="https://follow.it/that-crazy-webdev?action=followPub">[ follow me ]</a></p><p>&copy; 2022 Robin Boers. Webdesigner en PHP-developer sinds 2017.</p></footer></body></html>